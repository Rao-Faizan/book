"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8325],{4348:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"module2/chapter7","title":"Chapter 7: Gazebo Physics Simulation","description":"Hands-on guide to Gazebo Fortress/Garden for accurate physics-based robot simulation and ROS 2 integration","source":"@site/docs/module2/chapter7.mdx","sourceDirName":"module2","slug":"/module2/chapter7","permalink":"/book/docs/module2/chapter7","draft":false,"unlisted":false,"editUrl":"https://github.com/Rao-Faizan/book/tree/master/docs/module2/chapter7.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Chapter 7: Gazebo Physics Simulation","description":"Hands-on guide to Gazebo Fortress/Garden for accurate physics-based robot simulation and ROS 2 integration","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 6: Introduction to Robot Simulation","permalink":"/book/docs/module2/chapter6"},"next":{"title":"Chapter 8: Unity for High-Fidelity Rendering","permalink":"/book/docs/module2/chapter8"}}');var i=r(4848),o=r(8453);const t={title:"Chapter 7: Gazebo Physics Simulation",description:"Hands-on guide to Gazebo Fortress/Garden for accurate physics-based robot simulation and ROS 2 integration",sidebar_position:7},l="Chapter 7: Gazebo Physics Simulation",a={},d=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"What is Gazebo?",id:"what-is-gazebo",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Installation Guide",id:"installation-guide",level:2},{value:"Step 1: System Requirements Check",id:"step-1-system-requirements-check",level:3},{value:"Step 2: Install Gazebo Fortress",id:"step-2-install-gazebo-fortress",level:3},{value:"Step 3: Install ROS 2 - Gazebo Bridge",id:"step-3-install-ros-2---gazebo-bridge",level:3},{value:"Step 4: Test Installation",id:"step-4-test-installation",level:3},{value:"Understanding SDF (Simulation Description Format)",id:"understanding-sdf-simulation-description-format",level:2},{value:"SDF vs. URDF: Key Differences",id:"sdf-vs-urdf-key-differences",level:3},{value:"Creating Your First Gazebo World",id:"creating-your-first-gazebo-world",level:2},{value:"Basic World Structure",id:"basic-world-structure",level:3},{value:"Adding Objects to the World",id:"adding-objects-to-the-world",level:3},{value:"Physics Engines: Choosing the Right One",id:"physics-engines-choosing-the-right-one",level:2},{value:"1. ODE (Open Dynamics Engine) - Default",id:"1-ode-open-dynamics-engine---default",level:3},{value:"2. Bullet - High Performance",id:"2-bullet---high-performance",level:3},{value:"3. DART - Research Grade",id:"3-dart---research-grade",level:3},{value:"Recommendation for Humanoid Robots",id:"recommendation-for-humanoid-robots",level:3},{value:"Spawning Your URDF Robot in Gazebo",id:"spawning-your-urdf-robot-in-gazebo",level:2},{value:"Method 1: Using ROS 2 Command Line",id:"method-1-using-ros-2-command-line",level:3},{value:"Method 2: Using Launch File (Recommended)",id:"method-2-using-launch-file-recommended",level:3},{value:"Controlling Robots via ROS 2",id:"controlling-robots-via-ros-2",level:2},{value:"Understanding the ROS-Gazebo Bridge",id:"understanding-the-ros-gazebo-bridge",level:3},{value:"Example: Applying Joint Commands",id:"example-applying-joint-commands",level:3},{value:"Adding Gazebo Plugins to URDF",id:"adding-gazebo-plugins-to-urdf",level:3},{value:"Applying Forces and Torques",id:"applying-forces-and-torques",level:2},{value:"Method 1: Using ROS 2 Service",id:"method-1-using-ros-2-service",level:3},{value:"Method 2: Programmatically in Python",id:"method-2-programmatically-in-python",level:3},{value:"GUI Navigation and Controls",id:"gui-navigation-and-controls",level:2},{value:"Camera Controls",id:"camera-controls",level:3},{value:"Useful GUI Panels",id:"useful-gui-panels",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Monitoring Real-Time Factor (RTF)",id:"monitoring-real-time-factor-rtf",level:3},{value:"Optimization Strategies",id:"optimization-strategies",level:3},{value:"1. Simplify Collision Meshes",id:"1-simplify-collision-meshes",level:3},{value:"2. Adjust Physics Parameters",id:"2-adjust-physics-parameters",level:3},{value:"3. Use Headless Mode for Batch Simulations",id:"3-use-headless-mode-for-batch-simulations",level:3},{value:"Complete Example: Humanoid Walking Test",id:"complete-example-humanoid-walking-test",level:2},{value:"World File: <code>humanoid_test_world.sdf</code>",id:"world-file-humanoid_test_worldsdf",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Issue 1: Robot Falls Through Ground",id:"issue-1-robot-falls-through-ground",level:3},{value:"Issue 2: Joints Don&#39;t Move",id:"issue-2-joints-dont-move",level:3},{value:"Issue 3: Simulation is Very Slow",id:"issue-3-simulation-is-very-slow",level:3},{value:"Summary",id:"summary",level:2},{value:"\ud83c\udfaf Key Takeaways",id:"-key-takeaways",level:3},{value:"\ud83d\udcca Chapter Progress",id:"-chapter-progress",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Task: Create a Humanoid Balance Test",id:"task-create-a-humanoid-balance-test",level:3},{value:"Further Resources",id:"further-resources",level:2},{value:"Official Documentation",id:"official-documentation",level:3},{value:"Video Tutorials",id:"video-tutorials",level:3},{value:"Community",id:"community",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-7-gazebo-physics-simulation",children:"Chapter 7: Gazebo Physics Simulation"})}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Install"})," Gazebo Fortress or Garden on Ubuntu 22.04 LTS"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create"})," custom simulation worlds using SDF (Simulation Description Format)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spawn"})," your URDF humanoid robot from Module 1 into Gazebo"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configure"})," physics engines and parameters for realistic behavior"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Integrate"})," Gazebo with ROS 2 for bidirectional communication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Apply"})," forces and control robot joints through ROS 2 topics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Optimize"})," simulation performance and monitor real-time factors"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Prerequisites"}),": Chapter 6 (Simulation fundamentals), Module 1 (ROS 2, URDF)",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 90 minutes"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"what-is-gazebo",children:"What is Gazebo?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Gazebo"})," is an open-source 3D robotics simulator that emphasizes ",(0,i.jsx)(n.strong,{children:"physics accuracy"})," over visual fidelity. It's the industry standard for ROS-based robotics research and development."]}),"\n",(0,i.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Benefit"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Multiple Physics Engines"})}),(0,i.jsx)(n.td,{children:"ODE, Bullet, DART, Simbody"}),(0,i.jsx)(n.td,{children:"Choose speed vs. accuracy trade-off"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Sensor Simulation"})}),(0,i.jsx)(n.td,{children:"Cameras, LiDAR, IMU, depth, force-torque"}),(0,i.jsx)(n.td,{children:"Test perception without hardware"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"ROS 2 Native Integration"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gazebo_ros_pkgs"})}),(0,i.jsx)(n.td,{children:"Seamless pub/sub communication"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Plugin Architecture"})}),(0,i.jsx)(n.td,{children:"Custom sensors, actuators, world behaviors"}),(0,i.jsx)(n.td,{children:"Extend functionality"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Headless Mode"})}),(0,i.jsx)(n.td,{children:"Run without GUI"}),(0,i.jsx)(n.td,{children:"Parallel simulation on servers"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Open Source"})}),(0,i.jsx)(n.td,{children:"Apache 2.0 license"}),(0,i.jsx)(n.td,{children:"Free for commercial use"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"Gazebo vs. Gazebo Classic",type:"tip",children:(0,i.jsxs)(n.p,{children:["This chapter covers ",(0,i.jsx)(n.strong,{children:"Gazebo Fortress/Garden"})," (new architecture), not Gazebo Classic (legacy). The new Gazebo has improved performance, better modularity, and long-term support."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"installation-guide",children:"Installation Guide"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-system-requirements-check",children:"Step 1: System Requirements Check"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify Ubuntu version\r\nlsb_release -a\r\n# Should show: Ubuntu 22.04 LTS (Jammy Jellyfish)\r\n\r\n# Check available disk space (need ~5GB)\r\ndf -h /\r\n\r\n# Verify ROS 2 Humble is installed\r\nros2 --version\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-2-install-gazebo-fortress",children:"Step 2: Install Gazebo Fortress"}),"\n",(0,i.jsx)(n.p,{children:"Gazebo Fortress is the recommended version for ROS 2 Humble."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Add Gazebo package repository\r\nsudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\r\n\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null\r\n\r\n# Update package list\r\nsudo apt update\r\n\r\n# Install Gazebo Fortress\r\nsudo apt install gz-fortress\r\n\r\n# Verify installation\r\ngz sim --version\r\n# Should output: Gazebo Sim, version 6.x.x\n'})}),"\n",(0,i.jsxs)(n.admonition,{title:"Common Installation Issue",type:"warning",children:[(0,i.jsx)(n.p,{children:'If you see "Unable to locate package gz-fortress", ensure:'}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"You're on Ubuntu 22.04 (not 20.04 or 24.04)"}),"\n",(0,i.jsx)(n.li,{children:"The repository was added correctly"}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"sudo apt update"})," again"]}),"\n"]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-3-install-ros-2---gazebo-bridge",children:"Step 3: Install ROS 2 - Gazebo Bridge"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install ROS 2 Gazebo packages\r\nsudo apt install ros-humble-ros-gz\r\n\r\n# Source ROS 2 workspace\r\nsource /opt/ros/humble/setup.bash\r\n\r\n# Verify bridge installation\r\nros2 pkg list | grep ros_gz\r\n# Should show: ros_gz_bridge, ros_gz_sim, ros_gz_image, etc.\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-4-test-installation",children:"Step 4: Test Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Launch Gazebo with empty world\r\ngz sim empty.sdf\r\n\r\n# In another terminal, verify ROS 2 bridge\r\nsource /opt/ros/humble/setup.bash\r\nros2 topic list\r\n# Should show topics like /clock, /world/empty/clock\n"})}),"\n",(0,i.jsx)(n.p,{children:"If Gazebo opens successfully with a black ground plane, you're ready! \ud83c\udf89"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"understanding-sdf-simulation-description-format",children:"Understanding SDF (Simulation Description Format)"}),"\n",(0,i.jsx)(n.p,{children:"SDF is Gazebo's XML-based format for defining simulation worlds. It's more powerful than URDF for simulation scenarios."}),"\n",(0,i.jsx)(n.h3,{id:"sdf-vs-urdf-key-differences",children:"SDF vs. URDF: Key Differences"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Aspect"}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"URDF"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"SDF"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Purpose"})}),(0,i.jsx)(n.td,{children:"Robot description"}),(0,i.jsx)(n.td,{children:"Complete world description"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Scope"})}),(0,i.jsx)(n.td,{children:"Single robot"}),(0,i.jsx)(n.td,{children:"Multiple robots + environment"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Physics"})}),(0,i.jsx)(n.td,{children:"Limited"}),(0,i.jsx)(n.td,{children:"Comprehensive (friction, gravity, wind)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Sensors"})}),(0,i.jsx)(n.td,{children:"Plugin-based"}),(0,i.jsx)(n.td,{children:"Native support"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Compatibility"})}),(0,i.jsx)(n.td,{children:"ROS-specific"}),(0,i.jsx)(n.td,{children:"Simulator-agnostic"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"Good News",type:"note",children:(0,i.jsxs)(n.p,{children:["You can ",(0,i.jsx)(n.strong,{children:"spawn URDF robots in Gazebo"}),"! The ",(0,i.jsx)(n.code,{children:"ros_gz"})," bridge converts URDF to SDF automatically."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"creating-your-first-gazebo-world",children:"Creating Your First Gazebo World"}),"\n",(0,i.jsx)(n.h3,{id:"basic-world-structure",children:"Basic World Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- my_first_world.sdf --\x3e\r\n<?xml version="1.0"?>\r\n<sdf version="1.8">\r\n  <world name="my_world">\r\n    \r\n    \x3c!-- Physics Configuration --\x3e\r\n    <physics name="1ms" type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n    </physics>\r\n    \r\n    \x3c!-- Gravity (Earth-like) --\x3e\r\n    <gravity>0 0 -9.81</gravity>\r\n    \r\n    \x3c!-- Ground Plane --\x3e\r\n    <model name="ground_plane">\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.8 0.8 1</ambient>\r\n            <diffuse>0.8 0.8 0.8 1</diffuse>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Sun Light --\x3e\r\n    <light name="sun" type="directional">\r\n      <cast_shadows>true</cast_shadows>\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n      <specular>0.2 0.2 0.2 1</specular>\r\n      <direction>-0.5 0.1 -0.9</direction>\r\n    </light>\r\n    \r\n  </world>\r\n</sdf>\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Launch this world:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"gz sim my_first_world.sdf\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"adding-objects-to-the-world",children:"Adding Objects to the World"}),"\n",(0,i.jsx)(n.p,{children:"Let's add a box obstacle:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Add inside <world> tag --\x3e\r\n<model name="red_box">\r\n  <pose>2 0 0.5 0 0 0</pose>  \x3c!-- x y z roll pitch yaw --\x3e\r\n  <link name="box_link">\r\n    <collision name="collision">\r\n      <geometry>\r\n        <box>\r\n          <size>1 1 1</size>\r\n        </box>\r\n      </geometry>\r\n    </collision>\r\n    <visual name="visual">\r\n      <geometry>\r\n        <box>\r\n          <size>1 1 1</size>\r\n        </box>\r\n      </geometry>\r\n      <material>\r\n        <ambient>1 0 0 1</ambient>  \x3c!-- Red color --\x3e\r\n        <diffuse>1 0 0 1</diffuse>\r\n      </material>\r\n    </visual>\r\n    \r\n    \x3c!-- Inertial properties (for physics) --\x3e\r\n    <inertial>\r\n      <mass>10.0</mass>\r\n      <inertia>\r\n        <ixx>1.67</ixx>\r\n        <iyy>1.67</iyy>\r\n        <izz>1.67</izz>\r\n        <ixy>0</ixy>\r\n        <ixz>0</ixz>\r\n        <iyz>0</iyz>\r\n      </inertia>\r\n    </inertial>\r\n  </link>\r\n</model>\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Quick Material Colors",type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Red: ",(0,i.jsx)(n.code,{children:"<ambient>1 0 0 1</ambient>"})]}),"\n",(0,i.jsxs)(n.li,{children:["Green: ",(0,i.jsx)(n.code,{children:"<ambient>0 1 0 1</ambient>"})]}),"\n",(0,i.jsxs)(n.li,{children:["Blue: ",(0,i.jsx)(n.code,{children:"<ambient>0 0 1 1</ambient>"})]}),"\n",(0,i.jsxs)(n.li,{children:["Gray: ",(0,i.jsx)(n.code,{children:"<ambient>0.5 0.5 0.5 1</ambient>"})]}),"\n"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"physics-engines-choosing-the-right-one",children:"Physics Engines: Choosing the Right One"}),"\n",(0,i.jsx)(n.p,{children:"Gazebo supports multiple physics engines. Each has trade-offs:"}),"\n",(0,i.jsx)(n.h3,{id:"1-ode-open-dynamics-engine---default",children:"1. ODE (Open Dynamics Engine) - Default"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<physics name="ode_physics" type="ode">\r\n  <max_step_size>0.001</max_step_size>\r\n  <real_time_factor>1.0</real_time_factor>\r\n  <ode>\r\n    <solver>\r\n      <type>quick</type>\r\n      <iters>50</iters>\r\n    </solver>\r\n    <constraints>\r\n      <cfm>0.0</cfm>\r\n      <erp>0.2</erp>\r\n      <contact_max_correcting_vel>100.0</contact_max_correcting_vel>\r\n      <contact_surface_layer>0.001</contact_surface_layer>\r\n    </constraints>\r\n  </ode>\r\n</physics>\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best For"}),": General-purpose robotics, good balance of speed/accuracy",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Pros"}),": \u2705 Fast, stable, well-tested",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Cons"}),": \u274c Can be inaccurate for complex contact scenarios"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"2-bullet---high-performance",children:"2. Bullet - High Performance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<physics name="bullet_physics" type="bullet">\r\n  <max_step_size>0.001</max_step_size>\r\n  <real_time_factor>1.0</real_time_factor>\r\n  <bullet>\r\n    <solver>\r\n      <type>sequential_impulse</type>\r\n      <iters>50</iters>\r\n    </solver>\r\n  </bullet>\r\n</physics>\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best For"}),": High-speed simulation with many objects",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Pros"}),": \u2705 Very fast, GPU acceleration support",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Cons"}),": \u274c Less accurate contact physics"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"3-dart---research-grade",children:"3. DART - Research Grade"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<physics name="dart_physics" type="dart">\r\n  <max_step_size>0.001</max_step_size>\r\n  <real_time_factor>1.0</real_time_factor>\r\n  <dart>\r\n    <solver>\r\n      <solver_type>dantzig</solver_type>\r\n    </solver>\r\n    <collision_detector>bullet</collision_detector>\r\n  </dart>\r\n</physics>\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best For"}),": Humanoid bipedal locomotion, manipulation research",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Pros"}),": \u2705 Highly accurate, excellent for complex kinematic chains",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Cons"}),": \u274c Slower, requires more tuning"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"recommendation-for-humanoid-robots",children:"Recommendation for Humanoid Robots"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph TD\r\n    A[Choose Physics Engine] --\x3e B{Priority?}\r\n    B --\x3e|Speed| C[Bullet]\r\n    B --\x3e|Balance| D[ODE]\r\n    B --\x3e|Accuracy| E[DART]\r\n    C --\x3e F[Use for: Data generation]\r\n    D --\x3e G[Use for: Control testing]\r\n    E --\x3e H[Use for: Bipedal walking]\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Our Recommendation"}),": Start with ",(0,i.jsx)(n.strong,{children:"ODE"})," for learning, switch to ",(0,i.jsx)(n.strong,{children:"DART"})," for advanced humanoid control."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"spawning-your-urdf-robot-in-gazebo",children:"Spawning Your URDF Robot in Gazebo"}),"\n",(0,i.jsx)(n.h3,{id:"method-1-using-ros-2-command-line",children:"Method 1: Using ROS 2 Command Line"}),"\n",(0,i.jsx)(n.p,{children:"Assuming you have a URDF file from Module 1:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Launch Gazebo with empty world\r\ngz sim empty.sdf\r\n\r\n# Terminal 2: Spawn URDF robot\r\nsource /opt/ros/humble/setup.bash\r\n\r\nros2 run ros_gz_sim create \\\r\n  -name my_humanoid \\\r\n  -file /path/to/your/humanoid.urdf \\\r\n  -x 0 -y 0 -z 1.0\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"method-2-using-launch-file-recommended",children:"Method 2: Using Launch File (Recommended)"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"spawn_humanoid.launch.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"\"\"\"\r\nLaunch file to spawn humanoid robot in Gazebo\r\n\"\"\"\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription, ExecuteProcess\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    \r\n    # Path to URDF file\r\n    urdf_file = os.path.join(\r\n        get_package_share_directory('my_robot_description'),\r\n        'urdf',\r\n        'humanoid.urdf'\r\n    )\r\n    \r\n    # Read URDF content\r\n    with open(urdf_file, 'r') as f:\r\n        robot_description = f.read()\r\n    \r\n    # Launch Gazebo\r\n    gazebo = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource([\r\n            os.path.join(\r\n                get_package_share_directory('ros_gz_sim'),\r\n                'launch',\r\n                'gz_sim.launch.py'\r\n            )\r\n        ]),\r\n        launch_arguments={'gz_args': 'empty.sdf'}.items()\r\n    )\r\n    \r\n    # Spawn robot entity\r\n    spawn_robot = Node(\r\n        package='ros_gz_sim',\r\n        executable='create',\r\n        arguments=[\r\n            '-name', 'humanoid',\r\n            '-topic', 'robot_description',\r\n            '-x', '0', '-y', '0', '-z', '1.0'\r\n        ],\r\n        output='screen'\r\n    )\r\n    \r\n    # Robot state publisher (for TF transforms)\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        parameters=[{'robot_description': robot_description}],\r\n        output='screen'\r\n    )\r\n    \r\n    return LaunchDescription([\r\n        gazebo,\r\n        robot_state_publisher,\r\n        spawn_robot\r\n    ])\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Launch the robot:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_description spawn_humanoid.launch.py\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"controlling-robots-via-ros-2",children:"Controlling Robots via ROS 2"}),"\n",(0,i.jsx)(n.h3,{id:"understanding-the-ros-gazebo-bridge",children:"Understanding the ROS-Gazebo Bridge"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ros_gz_bridge"})," creates bidirectional communication:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\r\n    participant ROS as ROS 2 Node\r\n    participant Bridge as ros_gz_bridge\r\n    participant Gazebo as Gazebo Sim\r\n    \r\n    ROS->>Bridge: /cmd_vel (Twist)\r\n    Bridge->>Gazebo: Apply forces to joints\r\n    Gazebo--\x3e>Bridge: Joint states\r\n    Bridge--\x3e>ROS: /joint_states\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"example-applying-joint-commands",children:"Example: Applying Joint Commands"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'"""\r\nROS 2 node to control humanoid joints in Gazebo\r\n"""\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nfrom std_msgs.msg import Float64MultiArray\r\n\r\nclass HumanoidController(Node):\r\n    def __init__(self):\r\n        super().__init__(\'humanoid_controller\')\r\n        \r\n        # Publisher for joint position commands\r\n        self.joint_pub = self.create_publisher(\r\n            Float64MultiArray,\r\n            \'/humanoid/joint_commands\',\r\n            10\r\n        )\r\n        \r\n        # Subscriber for current joint states\r\n        self.joint_sub = self.create_subscription(\r\n            JointState,\r\n            \'/joint_states\',\r\n            self.joint_state_callback,\r\n            10\r\n        )\r\n        \r\n        # Timer for periodic control (100Hz)\r\n        self.timer = self.create_timer(0.01, self.control_loop)\r\n        \r\n        self.current_joints = None\r\n        self.target_angle = 0.0\r\n        \r\n    def joint_state_callback(self, msg):\r\n        """Store current joint positions"""\r\n        self.current_joints = dict(zip(msg.name, msg.position))\r\n        \r\n    def control_loop(self):\r\n        """Send joint commands to make robot wave arm"""\r\n        if self.current_joints is None:\r\n            return\r\n            \r\n        msg = Float64MultiArray()\r\n        \r\n        # Simple sine wave motion for right shoulder\r\n        import math\r\n        self.target_angle = math.sin(self.get_clock().now().nanoseconds * 1e-9)\r\n        \r\n        # Command format: [joint1, joint2, ..., jointN]\r\n        msg.data = [\r\n            0.0,  # left_shoulder\r\n            self.target_angle,  # right_shoulder (waving)\r\n            0.0,  # left_elbow\r\n            0.0,  # right_elbow\r\n            # ... add more joints as needed\r\n        ]\r\n        \r\n        self.joint_pub.publish(msg)\r\n        self.get_logger().info(f\'Commanding right shoulder: {self.target_angle:.2f} rad\')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    controller = HumanoidController()\r\n    rclpy.spin(controller)\r\n    controller.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"adding-gazebo-plugins-to-urdf",children:"Adding Gazebo Plugins to URDF"}),"\n",(0,i.jsx)(n.p,{children:"For Gazebo to control your robot, add plugins to your URDF:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Add to your humanoid.urdf --\x3e\r\n<gazebo>\r\n  <plugin\r\n    filename="gz-sim-joint-state-publisher-system"\r\n    name="gz::sim::systems::JointStatePublisher">\r\n  </plugin>\r\n  \r\n  <plugin\r\n    filename="gz-sim-joint-position-controller-system"\r\n    name="gz::sim::systems::JointPositionController">\r\n    <joint_name>right_shoulder_joint</joint_name>\r\n    <topic>/humanoid/joint_commands</topic>\r\n    <p_gain>10.0</p_gain>\r\n    <i_gain>0.1</i_gain>\r\n    <d_gain>1.0</d_gain>\r\n  </plugin>\r\n</gazebo>\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Plugin Types",type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JointStatePublisher"}),": Publishes current joint positions/velocities"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JointPositionController"}),": PID control for joint positions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DiffDrive"}),": For wheeled mobile robots"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"IMUSensor"}),": Simulates IMU data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CameraSensor"}),": Simulates RGB camera"]}),"\n"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"applying-forces-and-torques",children:"Applying Forces and Torques"}),"\n",(0,i.jsx)(n.h3,{id:"method-1-using-ros-2-service",children:"Method 1: Using ROS 2 Service"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Apply force to a link (e.g., push robot)\r\nros2 service call /world/empty/apply_link_wrench \\\r\n  ros_gz_interfaces/srv/ApplyLinkWrench \\\r\n  \"{\r\n    link_name: 'humanoid::base_link',\r\n    wrench: {\r\n      force: {x: 100.0, y: 0.0, z: 0.0},\r\n      torque: {x: 0.0, y: 0.0, z: 0.0}\r\n    },\r\n    duration: {sec: 1, nanosec: 0}\r\n  }\"\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"method-2-programmatically-in-python",children:"Method 2: Programmatically in Python"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from ros_gz_interfaces.srv import ApplyLinkWrench\r\nfrom geometry_msgs.msg import Wrench, Vector3\r\n\r\nclass ForceApplier(Node):\r\n    def __init__(self):\r\n        super().__init__('force_applier')\r\n        self.client = self.create_client(\r\n            ApplyLinkWrench,\r\n            '/world/empty/apply_link_wrench'\r\n        )\r\n        \r\n    def push_robot(self, force_x=100.0):\r\n        \"\"\"Apply forward force to robot base\"\"\"\r\n        req = ApplyLinkWrench.Request()\r\n        req.link_name = 'humanoid::base_link'\r\n        req.wrench = Wrench()\r\n        req.wrench.force = Vector3(x=force_x, y=0.0, z=0.0)\r\n        req.wrench.torque = Vector3(x=0.0, y=0.0, z=0.0)\r\n        req.duration = Duration(seconds=1)\r\n        \r\n        self.client.call_async(req)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"gui-navigation-and-controls",children:"GUI Navigation and Controls"}),"\n",(0,i.jsx)(n.h3,{id:"camera-controls",children:"Camera Controls"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Action"}),(0,i.jsx)(n.th,{children:"Mouse/Keyboard"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Rotate View"})}),(0,i.jsx)(n.td,{children:"Right-click + drag"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Pan View"})}),(0,i.jsx)(n.td,{children:"Shift + Right-click + drag"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Zoom"})}),(0,i.jsx)(n.td,{children:"Scroll wheel"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Orbit Around Object"})}),(0,i.jsx)(n.td,{children:"Left-click object + Right-click drag"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"useful-gui-panels",children:"Useful GUI Panels"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"World Tree"})," (left): List of all models"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Component Inspector"})," (right): Properties of selected object"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"3D View"})," (center): Main simulation viewport"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Play/Pause/Step"})," (top toolbar): Control simulation time"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Pro Tip",type:"tip",children:(0,i.jsxs)(n.p,{children:["Press ",(0,i.jsx)(n.code,{children:"T"})," to show transparent mode\u2014useful for seeing internal robot structure!"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,i.jsx)(n.h3,{id:"monitoring-real-time-factor-rtf",children:"Monitoring Real-Time Factor (RTF)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check current RTF\r\ngz topic -e -t /stats\r\n\r\n# Look for: real_time_factor: 0.98  (target: \u2265 1.0)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"optimization-strategies",children:"Optimization Strategies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph LR\r\n    A[Slow Simulation] --\x3e B{Diagnose}\r\n    B --\x3e|Complex Meshes| C[Simplify Collision Geometry]\r\n    B --\x3e|Too Many Contacts| D[Reduce Joint Friction]\r\n    B --\x3e|Small Timestep| E[Increase max_step_size]\r\n    B --\x3e|Heavy Sensors| F[Reduce Sensor Update Rate]\r\n    C --\x3e G[RTF \u2265 1.0 \u2705]\r\n    D --\x3e G\r\n    E --\x3e G\r\n    F --\x3e G\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"1-simplify-collision-meshes",children:"1. Simplify Collision Meshes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- BAD: High-poly mesh for collision --\x3e\r\n<collision name="collision">\r\n  <geometry>\r\n    <mesh>\r\n      <uri>model://humanoid/meshes/detailed_hand.stl</uri>\r\n    </mesh>\r\n  </geometry>\r\n</collision>\r\n\r\n\x3c!-- GOOD: Use simple box approximation --\x3e\r\n<collision name="collision">\r\n  <geometry>\r\n    <box>\r\n      <size>0.1 0.05 0.2</size>\r\n    </box>\r\n  </geometry>\r\n</collision>\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"2-adjust-physics-parameters",children:"2. Adjust Physics Parameters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- For faster simulation (less accurate) --\x3e\r\n<physics name="faster" type="ode">\r\n  <max_step_size>0.002</max_step_size>  \x3c!-- Larger = faster --\x3e\r\n  <real_time_update_rate>500</real_time_update_rate>  \x3c!-- Lower = faster --\x3e\r\n  <ode>\r\n    <solver>\r\n      <iters>25</iters>  \x3c!-- Fewer iterations = faster --\x3e\r\n    </solver>\r\n  </ode>\r\n</physics>\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"3-use-headless-mode-for-batch-simulations",children:"3. Use Headless Mode for Batch Simulations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run without GUI (much faster)\r\ngz sim -s empty.sdf\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"complete-example-humanoid-walking-test",children:"Complete Example: Humanoid Walking Test"}),"\n",(0,i.jsx)(n.p,{children:"Let's create a complete simulation for testing bipedal balance:"}),"\n",(0,i.jsxs)(n.h3,{id:"world-file-humanoid_test_worldsdf",children:["World File: ",(0,i.jsx)(n.code,{children:"humanoid_test_world.sdf"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<sdf version="1.8">\r\n  <world name="humanoid_test">\r\n    \r\n    \x3c!-- Physics optimized for bipedal robots --\x3e\r\n    <physics name="dart_physics" type="dart">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <dart>\r\n        <solver>\r\n          <solver_type>dantzig</solver_type>\r\n        </solver>\r\n        <collision_detector>bullet</collision_detector>\r\n      </dart>\r\n    </physics>\r\n    \r\n    <gravity>0 0 -9.81</gravity>\r\n    \r\n    \x3c!-- Textured ground for visual tracking --\x3e\r\n    <model name="ground">\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <surface>\r\n            <friction>\r\n              <ode>\r\n                <mu>1.0</mu>  \x3c!-- High friction for stable walking --\x3e\r\n                <mu2>1.0</mu2>\r\n              </ode>\r\n            </friction>\r\n          </surface>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.5 0.5 0.5 1</ambient>\r\n            <diffuse>0.5 0.5 0.5 1</diffuse>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Obstacle for navigation testing --\x3e\r\n    <model name="test_box">\r\n      <pose>3 0 0.25 0 0 0</pose>\r\n      <link name="box_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box><size>0.5 1.0 0.5</size></box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box><size>0.5 1.0 0.5</size></box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0 0 1 1</ambient>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>5.0</mass>\r\n          <inertia>\r\n            <ixx>0.42</ixx>\r\n            <iyy>0.27</iyy>\r\n            <izz>0.52</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Good lighting for vision --\x3e\r\n    <light name="sun" type="directional">\r\n      <cast_shadows>true</cast_shadows>\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n      <specular>0.2 0.2 0.2 1</specular>\r\n      <direction>-0.5 0.1 -0.9</direction>\r\n    </light>\r\n    \r\n  </world>\r\n</sdf>\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Launch:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"gz sim humanoid_test_world.sdf\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,i.jsx)(n.h3,{id:"issue-1-robot-falls-through-ground",children:"Issue 1: Robot Falls Through Ground"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Robot spawns and immediately falls into void"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Ensure ground plane has collision --\x3e\r\n<collision name="collision">\r\n  <geometry>\r\n    <plane><normal>0 0 1</normal></plane>\r\n  </geometry>\r\n</collision>\r\n\r\n\x3c!-- Ensure robot has inertial properties --\x3e\r\n<inertial>\r\n  <mass>50.0</mass>  \x3c!-- Don\'t use mass=0! --\x3e\r\n  <inertia>\r\n    <ixx>1.0</ixx>\r\n    \x3c!-- ... --\x3e\r\n  </inertia>\r\n</inertial>\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"issue-2-joints-dont-move",children:"Issue 2: Joints Don't Move"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Sending commands but robot stays still"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Checklist"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Gazebo plugin added to URDF?"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Topic names match exactly?"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Joint limits allow desired motion?"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 PID gains reasonable? (Start with P=10, I=0.1, D=1)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"issue-3-simulation-is-very-slow",children:"Issue 3: Simulation is Very Slow"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": RTF < 0.5"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Use simpler collision meshes (boxes/cylinders)"}),"\n",(0,i.jsx)(n.li,{children:"Reduce sensor update rates"}),"\n",(0,i.jsxs)(n.li,{children:["Increase ",(0,i.jsx)(n.code,{children:"max_step_size"})," to 0.002"]}),"\n",(0,i.jsx)(n.li,{children:"Switch from DART to ODE physics"}),"\n",(0,i.jsx)(n.li,{children:"Close resource-heavy applications"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.h3,{id:"-key-takeaways",children:"\ud83c\udfaf Key Takeaways"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gazebo Fortress"})," is the modern version for ROS 2 Humble"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SDF format"})," defines complete simulation worlds (robots + environment)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Three physics engines"}),": ODE (balanced), Bullet (fast), DART (accurate)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ROS 2 integration"})," enables bidirectional communication via ",(0,i.jsx)(n.code,{children:"ros_gz_bridge"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance optimization"})," is critical: simplify collisions, tune physics timestep"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"URDF robots spawn easily"})," with Gazebo plugins for sensors/actuators"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-chapter-progress",children:"\ud83d\udcca Chapter Progress"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph LR\r\n    A[\u2705 Installation] --\x3e B[\u2705 SDF Worlds]\r\n    B --\x3e C[\u2705 Physics Engines]\r\n    C --\x3e D[\u2705 URDF Spawning]\r\n    D --\x3e E[\u2705 ROS 2 Control]\r\n    E --\x3e F[\u2705 Optimization]\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,i.jsx)(n.h3,{id:"task-create-a-humanoid-balance-test",children:"Task: Create a Humanoid Balance Test"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create a world"})," with a 10cm tall platform"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spawn your URDF humanoid"})," from Module 1 on the platform"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Apply a side force"})," (50N) to test balance recovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Record"})," whether robot remains standing for 5 seconds"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"World file loads without errors"}),"\n",(0,i.jsx)(n.li,{children:"Robot spawns at height = 0.1m"}),"\n",(0,i.jsx)(n.li,{children:"Force application visible in GUI"}),"\n",(0,i.jsxs)(n.li,{children:["Joint states published to ",(0,i.jsx)(n.code,{children:"/joint_states"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 30 minutes"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"further-resources",children:"Further Resources"}),"\n",(0,i.jsx)(n.h3,{id:"official-documentation",children:"Official Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcd8 ",(0,i.jsx)(n.a,{href:"https://gazebosim.org/docs/fortress",children:"Gazebo Documentation"})," - Complete API reference"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udd0c ",(0,i.jsx)(n.a,{href:"https://github.com/gazebosim/ros_gz",children:"Gazebo ROS 2 Integration"})," - Bridge tutorials"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcd0 ",(0,i.jsx)(n.a,{href:"http://sdformat.org/",children:"SDF Format Specification"})," - Complete XML schema"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"video-tutorials",children:"Video Tutorials"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\ud83c\udfa5 ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=%3Cexample%3E",children:"Gazebo Fortress Quickstart"})," - 20-minute intro"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83c\udfa5 ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=%3Cexample%3E",children:"ROS 2 + Gazebo Integration"})," - Hands-on walkthrough"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"community",children:"Community"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcac ",(0,i.jsx)(n.a,{href:"https://answers.gazebosim.org/",children:"Gazebo Answers"})," - Q&A forum"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcac ",(0,i.jsx)(n.a,{href:"https://discourse.ros.org/c/simulation",children:"ROS Discourse - Simulation"})," - General simulation topics"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"Chapter 8"}),", you'll explore ",(0,i.jsx)(n.strong,{children:"Unity for High-Fidelity Rendering"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Installing Unity Hub and Unity Robotics packages"}),"\n",(0,i.jsx)(n.li,{children:"Creating photorealistic indoor environments"}),"\n",(0,i.jsx)(n.li,{children:"Using HDRP for stunning visuals"}),"\n",(0,i.jsx)(n.li,{children:"ROS-TCP-Connector for Unity \u2194 ROS 2 communication"}),"\n",(0,i.jsx)(n.li,{children:"Generating synthetic training data"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Get ready to make your robots look ",(0,i.jsx)(n.strong,{children:"amazing"}),"! \ud83c\udfa8\u2728"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.admonition,{title:"Chapter Completion",type:"note",children:(0,i.jsxs)(n.p,{children:["\u2705 You've completed Chapter 7: Gazebo Physics Simulation",(0,i.jsx)(n.br,{}),"\n","\u23f1\ufe0f Estimated time to complete: 90 minutes",(0,i.jsx)(n.br,{}),"\n","\ud83d\udcca Progress: Module 2 - Chapter 2 of 5"]})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(6540);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);