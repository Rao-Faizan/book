"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[244],{1363:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module1/chapter5","title":"Launch Files and Package Management","description":"Launch Files and Package Management","source":"@site/docs/module1/chapter5.mdx","sourceDirName":"module1","slug":"/module1/chapter5","permalink":"/book/docs/module1/chapter5","draft":false,"unlisted":false,"editUrl":"https://github.com/Rao-Faizan/book/tree/master/docs/module1/chapter5.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"chapter5","title":"Launch Files and Package Management","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Understanding URDF for Humanoid Robot Description","permalink":"/book/docs/module1/chapter4"},"next":{"title":"Module 2: The Digital Twin","permalink":"/book/docs/category/module-2-the-digital-twin"}}');var a=r(4848),i=r(8453);const o={id:"chapter5",title:"Launch Files and Package Management",sidebar_position:5},l=void 0,t={},c=[{value:"Launch Files and Package Management",id:"launch-files-and-package-management",level:2},{value:"Learning Objectives",id:"learning-objectives",level:3},{value:"5.1 Introduction to Launch Files",id:"51-introduction-to-launch-files",level:2},{value:"Why Launch Files?",id:"why-launch-files",level:3},{value:"Launch System Architecture",id:"launch-system-architecture",level:3},{value:"5.2 Python Launch File Syntax",id:"52-python-launch-file-syntax",level:2},{value:"Basic Structure",id:"basic-structure",level:3},{value:"Starting Multiple Nodes",id:"starting-multiple-nodes",level:3},{value:"Running a Launch File",id:"running-a-launch-file",level:3},{value:"5.3 Node Configuration: Parameters and Remappings",id:"53-node-configuration-parameters-and-remappings",level:2},{value:"Passing Parameters",id:"passing-parameters",level:3},{value:"Loading Parameters from YAML Files",id:"loading-parameters-from-yaml-files",level:3},{value:"Topic, Service, and Action Remapping",id:"topic-service-and-action-remapping",level:3},{value:"5.4 Launch Arguments for Flexibility",id:"54-launch-arguments-for-flexibility",level:2},{value:"Declaring Launch Arguments",id:"declaring-launch-arguments",level:3},{value:"Passing Arguments at Runtime",id:"passing-arguments-at-runtime",level:3},{value:"Conditional Launching",id:"conditional-launching",level:3},{value:"5.5 ROS 2 Package Structure",id:"55-ros-2-package-structure",level:2},{value:"Standard Directory Layout",id:"standard-directory-layout",level:3},{value:"Creating a Package",id:"creating-a-package",level:3},{value:"5.6 package.xml Configuration",id:"56-packagexml-configuration",level:2},{value:"5.7 setup.py and setup.cfg",id:"57-setuppy-and-setupcfg",level:2},{value:"setup.py Configuration",id:"setuppy-configuration",level:3},{value:"setup.cfg",id:"setupcfg",level:3},{value:"5.8 Building with colcon",id:"58-building-with-colcon",level:2},{value:"The colcon Build System",id:"the-colcon-build-system",level:3},{value:"Building a Package",id:"building-a-package",level:3},{value:"Build Output",id:"build-output",level:3},{value:"5.9 Workspace Setup and Sourcing",id:"59-workspace-setup-and-sourcing",level:2},{value:"Workspace Anatomy",id:"workspace-anatomy",level:3},{value:"Sourcing",id:"sourcing",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"5.10 Dependency Management with rosdep",id:"510-dependency-management-with-rosdep",level:2},{value:"What is rosdep?",id:"what-is-rosdep",level:3},{value:"Installing Dependencies",id:"installing-dependencies",level:3},{value:"Declaring Dependencies",id:"declaring-dependencies",level:3},{value:"5.11 Testing Your Package",id:"511-testing-your-package",level:2},{value:"Unit Tests with pytest",id:"unit-tests-with-pytest",level:3},{value:"Running Tests",id:"running-tests",level:3},{value:"Linting and Code Quality",id:"linting-and-code-quality",level:3},{value:"5.12 Complete Package Example",id:"512-complete-package-example",level:2},{value:"Package Structure",id:"package-structure",level:3},{value:"Node: arm_controller.py",id:"node-arm_controllerpy",level:3},{value:"Configuration: config/arm_params.yaml",id:"configuration-configarm_paramsyaml",level:3},{value:"Launch File: launch/arm_control.launch.py",id:"launch-file-launcharm_controllaunchpy",level:3},{value:"setup.py",id:"setuppy",level:3},{value:"package.xml",id:"packagexml",level:3},{value:"Build and Run",id:"build-and-run",level:3},{value:"5.13 Best Practices",id:"513-best-practices",level:2},{value:"Documentation",id:"documentation",level:3},{value:"Usage",id:"usage",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Dependencies",id:"dependencies",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h2,{id:"launch-files-and-package-management",children:"Launch Files and Package Management"}),"\n",(0,a.jsxs)(e.p,{children:["As your ROS 2 systems grow in complexity, manually starting individual nodes becomes impractical. This chapter teaches you how to use ",(0,a.jsx)(e.strong,{children:"launch files"})," to manage multi-node systems and organize your code into ",(0,a.jsx)(e.strong,{children:"ROS 2 packages"})," following professional development practices."]}),"\n",(0,a.jsx)(e.h3,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,a.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Understand the purpose and benefits of launch files for complex robot systems."}),"\n",(0,a.jsx)(e.li,{children:"Write Python launch files using ROS 2 launch syntax."}),"\n",(0,a.jsx)(e.li,{children:"Configure nodes with parameters and remappings in launch files."}),"\n",(0,a.jsx)(e.li,{children:"Use launch arguments for flexible, reusable launch configurations."}),"\n",(0,a.jsx)(e.li,{children:"Structure ROS 2 packages following standard conventions."}),"\n",(0,a.jsxs)(e.li,{children:["Configure package metadata and dependencies in ",(0,a.jsx)(e.code,{children:"package.xml"}),"."]}),"\n",(0,a.jsxs)(e.li,{children:["Set up Python package entry points in ",(0,a.jsx)(e.code,{children:"setup.py"}),"."]}),"\n",(0,a.jsxs)(e.li,{children:["Build and manage packages using the ",(0,a.jsx)(e.code,{children:"colcon"})," build system."]}),"\n",(0,a.jsx)(e.li,{children:"Handle workspace overlays and environment sourcing."}),"\n",(0,a.jsxs)(e.li,{children:["Manage dependencies with ",(0,a.jsx)(e.code,{children:"rosdep"}),"."]}),"\n",(0,a.jsx)(e.li,{children:"Apply best practices for documentation, testing, and versioning."}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"51-introduction-to-launch-files",children:"5.1 Introduction to Launch Files"}),"\n",(0,a.jsx)(e.h3,{id:"why-launch-files",children:"Why Launch Files?"}),"\n",(0,a.jsx)(e.p,{children:"Imagine a humanoid robot system with:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"5 sensor nodes (camera, lidar, IMU, force sensors)"}),"\n",(0,a.jsx)(e.li,{children:"10 control nodes (one per limb joint controller)"}),"\n",(0,a.jsx)(e.li,{children:"3 planning nodes (navigation, manipulation, balance)"}),"\n",(0,a.jsx)(e.li,{children:"2 visualization nodes (RViz2, diagnostics)"}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["Starting 20+ nodes manually in separate terminals is error-prone and time-consuming. ",(0,a.jsx)(e.strong,{children:"Launch files"})," solve this by:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Automating startup"}),": Launch all nodes with a single command"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Managing configuration"}),": Set parameters, remappings, and environment variables"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Enabling flexibility"}),": Use arguments to switch between simulation and hardware"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Improving reproducibility"}),": Standardize system configuration across team members"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"launch-system-architecture",children:"Launch System Architecture"}),"\n",(0,a.jsx)(e.p,{children:"ROS 2's launch system is built on Python (unlike ROS 1's XML-based launch files), providing:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Full programming capabilities (conditionals, loops, functions)"}),"\n",(0,a.jsx)(e.li,{children:"Type safety and IDE support"}),"\n",(0,a.jsx)(e.li,{children:"Modular composition (include other launch files)"}),"\n",(0,a.jsx)(e.li,{children:"Event-based execution (react to node lifecycle changes)"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"52-python-launch-file-syntax",children:"5.2 Python Launch File Syntax"}),"\n",(0,a.jsx)(e.h3,{id:"basic-structure",children:"Basic Structure"}),"\n",(0,a.jsxs)(e.p,{children:["A launch file is a Python script with a ",(0,a.jsx)(e.code,{children:"generate_launch_description()"})," function:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_robot_control',\r\n            executable='velocity_controller',\r\n            name='velocity_controller_node'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Key components"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"LaunchDescription"}),": Container for launch actions"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"Node"}),": Action to start a ROS 2 node"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"package"}),": Package containing the executable"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"executable"}),": Name of the node executable (from ",(0,a.jsx)(e.code,{children:"setup.py"})," entry points)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"name"}),": Runtime name for the node (overrides default)"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"starting-multiple-nodes",children:"Starting Multiple Nodes"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        # Sensor node\r\n        Node(\r\n            package='sensor_drivers',\r\n            executable='camera_node',\r\n            name='head_camera',\r\n            output='screen'  # Print output to console\r\n        ),\r\n        \r\n        # Control node\r\n        Node(\r\n            package='robot_control',\r\n            executable='arm_controller',\r\n            name='left_arm_controller',\r\n            output='screen'\r\n        ),\r\n        \r\n        # Planning node\r\n        Node(\r\n            package='motion_planning',\r\n            executable='trajectory_planner',\r\n            name='planner',\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsxs)(e.strong,{children:[(0,a.jsx)(e.code,{children:"output"})," parameter"]}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"'screen'"}),": Display node output in terminal"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"'log'"}),": Write output to log files only"]}),"\n",(0,a.jsxs)(e.li,{children:["Default: ",(0,a.jsx)(e.code,{children:"'log'"})]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"running-a-launch-file",children:"Running a Launch File"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_robot_bringup robot.launch.py\n"})}),"\n",(0,a.jsx)(e.p,{children:"Or from a package:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 launch <package_name> <launch_file>\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"53-node-configuration-parameters-and-remappings",children:"5.3 Node Configuration: Parameters and Remappings"}),"\n",(0,a.jsx)(e.h3,{id:"passing-parameters",children:"Passing Parameters"}),"\n",(0,a.jsx)(e.p,{children:"Parameters allow runtime configuration without code changes:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_control',\r\n            executable='velocity_controller',\r\n            name='left_arm_controller',\r\n            parameters=[{\r\n                'max_velocity': 2.0,\r\n                'control_frequency': 100.0,\r\n                'joint_names': ['shoulder', 'elbow', 'wrist'],\r\n                'use_sim_time': False\r\n            }],\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Parameter types"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"int"}),", ",(0,a.jsx)(e.code,{children:"float"}),", ",(0,a.jsx)(e.code,{children:"str"}),", ",(0,a.jsx)(e.code,{children:"bool"})]}),"\n",(0,a.jsxs)(e.li,{children:["Lists: ",(0,a.jsx)(e.code,{children:"[1, 2, 3]"})," or ",(0,a.jsx)(e.code,{children:"['a', 'b', 'c']"})]}),"\n",(0,a.jsxs)(e.li,{children:["Nested dictionaries: ",(0,a.jsx)(e.code,{children:"{'gains': {'p': 1.0, 'i': 0.1, 'd': 0.05}}"})]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"loading-parameters-from-yaml-files",children:"Loading Parameters from YAML Files"}),"\n",(0,a.jsx)(e.p,{children:"For complex configurations, use YAML files:"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"File"}),": ",(0,a.jsx)(e.code,{children:"config/arm_controller.yaml"})]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"left_arm_controller:\r\n  ros__parameters:\r\n    max_velocity: 2.0\r\n    control_frequency: 100.0\r\n    joint_names:\r\n      - shoulder\r\n      - elbow\r\n      - wrist\r\n    pid_gains:\r\n      shoulder:\r\n        p: 10.0\r\n        i: 0.5\r\n        d: 1.0\r\n      elbow:\r\n        p: 8.0\r\n        i: 0.3\r\n        d: 0.8\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Launch file"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    config = os.path.join(\r\n        get_package_share_directory('robot_control'),\r\n        'config',\r\n        'arm_controller.yaml'\r\n    )\r\n    \r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_control',\r\n            executable='velocity_controller',\r\n            name='left_arm_controller',\r\n            parameters=[config],\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsx)(e.h3,{id:"topic-service-and-action-remapping",children:"Topic, Service, and Action Remapping"}),"\n",(0,a.jsx)(e.p,{children:"Remapping changes the names of topics/services/actions at runtime:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_control',\r\n            executable='arm_controller',\r\n            name='left_arm_controller',\r\n            remappings=[\r\n                ('/cmd_vel', '/left_arm/cmd_vel'),\r\n                ('/joint_states', '/left_arm/joint_states'),\r\n                ('/goal_pose', '/left_arm/goal_pose')\r\n            ],\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Use cases"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Namespace organization: ",(0,a.jsx)(e.code,{children:"/left_arm/cmd_vel"}),", ",(0,a.jsx)(e.code,{children:"/right_arm/cmd_vel"})]}),"\n",(0,a.jsxs)(e.li,{children:["Connecting incompatible nodes: remap ",(0,a.jsx)(e.code,{children:"/output"})," to ",(0,a.jsx)(e.code,{children:"/input"})]}),"\n",(0,a.jsx)(e.li,{children:"Running multiple instances: remap to unique topic names"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"54-launch-arguments-for-flexibility",children:"5.4 Launch Arguments for Flexibility"}),"\n",(0,a.jsx)(e.h3,{id:"declaring-launch-arguments",children:"Declaring Launch Arguments"}),"\n",(0,a.jsx)(e.p,{children:"Arguments make launch files reusable across scenarios:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Declare arguments\r\n    use_sim_arg = DeclareLaunchArgument(\r\n        'use_sim',\r\n        default_value='false',\r\n        description='Use simulation time if true'\r\n    )\r\n    \r\n    robot_name_arg = DeclareLaunchArgument(\r\n        'robot_name',\r\n        default_value='humanoid_v1',\r\n        description='Name of the robot'\r\n    )\r\n    \r\n    # Use arguments in nodes\r\n    return LaunchDescription([\r\n        use_sim_arg,\r\n        robot_name_arg,\r\n        \r\n        Node(\r\n            package='robot_control',\r\n            executable='controller',\r\n            name='controller_node',\r\n            parameters=[{\r\n                'use_sim_time': LaunchConfiguration('use_sim'),\r\n                'robot_name': LaunchConfiguration('robot_name')\r\n            }],\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsx)(e.h3,{id:"passing-arguments-at-runtime",children:"Passing Arguments at Runtime"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Use default values\r\nros2 launch my_robot_bringup robot.launch.py\r\n\r\n# Override arguments\r\nros2 launch my_robot_bringup robot.launch.py use_sim:=true robot_name:=humanoid_v2\n"})}),"\n",(0,a.jsx)(e.h3,{id:"conditional-launching",children:"Conditional Launching"}),"\n",(0,a.jsx)(e.p,{children:"Launch nodes conditionally based on arguments:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.conditions import IfCondition, UnlessCondition\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    use_sim_arg = DeclareLaunchArgument(\r\n        'use_sim',\r\n        default_value='false',\r\n        description='Use simulation'\r\n    )\r\n    \r\n    return LaunchDescription([\r\n        use_sim_arg,\r\n        \r\n        # Launch Gazebo only if use_sim is true\r\n        Node(\r\n            package='gazebo_ros',\r\n            executable='gzserver',\r\n            name='gazebo_server',\r\n            condition=IfCondition(LaunchConfiguration('use_sim')),\r\n            output='screen'\r\n        ),\r\n        \r\n        # Launch hardware interface only if use_sim is false\r\n        Node(\r\n            package='robot_hardware',\r\n            executable='hardware_interface',\r\n            name='hardware_node',\r\n            condition=UnlessCondition(LaunchConfiguration('use_sim')),\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"55-ros-2-package-structure",children:"5.5 ROS 2 Package Structure"}),"\n",(0,a.jsx)(e.h3,{id:"standard-directory-layout",children:"Standard Directory Layout"}),"\n",(0,a.jsx)(e.p,{children:"A well-structured ROS 2 Python package:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"my_robot_control/\r\n\u251c\u2500\u2500 package.xml          # Package metadata and dependencies\r\n\u251c\u2500\u2500 setup.py             # Python package configuration\r\n\u251c\u2500\u2500 setup.cfg            # Additional metadata\r\n\u251c\u2500\u2500 resource/            # Package marker (auto-generated)\r\n\u2502   \u2514\u2500\u2500 my_robot_control\r\n\u251c\u2500\u2500 my_robot_control/    # Python source code\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 velocity_controller.py\r\n\u2502   \u251c\u2500\u2500 position_controller.py\r\n\u2502   \u2514\u2500\u2500 utils.py\r\n\u251c\u2500\u2500 launch/              # Launch files\r\n\u2502   \u251c\u2500\u2500 robot.launch.py\r\n\u2502   \u2514\u2500\u2500 controllers.launch.py\r\n\u251c\u2500\u2500 config/              # Configuration files (YAML, params)\r\n\u2502   \u251c\u2500\u2500 controllers.yaml\r\n\u2502   \u2514\u2500\u2500 sensors.yaml\r\n\u251c\u2500\u2500 urdf/                # Robot descriptions\r\n\u2502   \u251c\u2500\u2500 humanoid.urdf.xacro\r\n\u2502   \u2514\u2500\u2500 sensors.urdf.xacro\r\n\u251c\u2500\u2500 test/                # Unit tests\r\n\u2502   \u251c\u2500\u2500 test_velocity_controller.py\r\n\u2502   \u2514\u2500\u2500 test_position_controller.py\r\n\u2514\u2500\u2500 README.md            # Package documentation\n"})}),"\n",(0,a.jsx)(e.h3,{id:"creating-a-package",children:"Creating a Package"}),"\n",(0,a.jsxs)(e.p,{children:["Use ",(0,a.jsx)(e.code,{children:"ros2 pkg create"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_robot_control \\\r\n  --dependencies rclpy std_msgs geometry_msgs sensor_msgs\r\n\r\ncd my_robot_control\r\nmkdir launch config urdf test\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Flags"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--build-type ament_python"}),": Python package (use ",(0,a.jsx)(e.code,{children:"ament_cmake"})," for C++)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--dependencies"}),": Automatically add dependencies to ",(0,a.jsx)(e.code,{children:"package.xml"})]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"56-packagexml-configuration",children:"5.6 package.xml Configuration"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"package.xml"})," defines package metadata and dependencies:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>my_robot_control</name>\r\n  <version>1.0.0</version>\r\n  <description>Control nodes for humanoid robot</description>\r\n  <maintainer email="yourname@example.com">Your Name</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  \x3c!-- Build tool dependency --\x3e\r\n  <buildtool_depend>ament_python</buildtool_depend>\r\n\r\n  \x3c!-- Runtime dependencies (needed when running nodes) --\x3e\r\n  <depend>rclpy</depend>\r\n  <depend>std_msgs</depend>\r\n  <depend>geometry_msgs</depend>\r\n  <depend>sensor_msgs</depend>\r\n  <depend>tf2_ros</depend>\r\n\r\n  \x3c!-- Test dependencies --\x3e\r\n  <test_depend>ament_copyright</test_depend>\r\n  <test_depend>ament_flake8</test_depend>\r\n  <test_depend>ament_pep257</test_depend>\r\n  <test_depend>python3-pytest</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Dependency Types"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<buildtool_depend>"}),": Build system tools (e.g., ",(0,a.jsx)(e.code,{children:"ament_python"}),", ",(0,a.jsx)(e.code,{children:"ament_cmake"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<depend>"}),": Both build ",(0,a.jsx)(e.strong,{children:"and"})," runtime dependency (most common)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<build_depend>"}),": Only needed at build time"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<exec_depend>"}),": Only needed at runtime"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<test_depend>"}),": Only for running tests"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Common Fields"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<name>"}),": Package name (must match directory name)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<version>"}),": Semantic version (MAJOR.MINOR.PATCH)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<description>"}),": One-line package description"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<maintainer>"}),": Package maintainer(s)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"<license>"}),": Software license (Apache-2.0, MIT, BSD, etc.)"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"57-setuppy-and-setupcfg",children:"5.7 setup.py and setup.cfg"}),"\n",(0,a.jsx)(e.h3,{id:"setuppy-configuration",children:"setup.py Configuration"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"setup.py"})," configures Python package installation:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from setuptools import setup\r\nimport os\r\nfrom glob import glob\r\n\r\npackage_name = 'my_robot_control'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='1.0.0',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n        # Install launch files\r\n        (os.path.join('share', package_name, 'launch'),\r\n            glob('launch/*.launch.py')),\r\n        # Install config files\r\n        (os.path.join('share', package_name, 'config'),\r\n            glob('config/*.yaml')),\r\n        # Install URDF files\r\n        (os.path.join('share', package_name, 'urdf'),\r\n            glob('urdf/*.urdf') + glob('urdf/*.xacro')),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='Your Name',\r\n    maintainer_email='yourname@example.com',\r\n    description='Control nodes for humanoid robot',\r\n    license='Apache-2.0',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'velocity_controller = my_robot_control.velocity_controller:main',\r\n            'position_controller = my_robot_control.position_controller:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Key sections"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"packages"}),": List of Python packages to install (usually just ",(0,a.jsx)(e.code,{children:"[package_name]"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"data_files"}),": Non-Python files (launch, config, URDF)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"entry_points"}),": Executable scripts (maps names to Python functions)"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Entry Point Format"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"'executable_name = package_name.module_name:function_name'\n"})}),"\n",(0,a.jsxs)(e.p,{children:["Example: ",(0,a.jsx)(e.code,{children:"'velocity_controller = my_robot_control.velocity_controller:main'"})]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Creates executable ",(0,a.jsx)(e.code,{children:"velocity_controller"})]}),"\n",(0,a.jsxs)(e.li,{children:["Calls ",(0,a.jsx)(e.code,{children:"main()"})," from ",(0,a.jsx)(e.code,{children:"my_robot_control/velocity_controller.py"})]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"setupcfg",children:"setup.cfg"}),"\n",(0,a.jsx)(e.p,{children:"Minimal configuration for modern Python packages:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cfg",children:"[develop]\r\nscript_dir=$base/lib/my_robot_control\r\n\r\n[install]\r\ninstall_scripts=$base/lib/my_robot_control\n"})}),"\n",(0,a.jsx)(e.p,{children:"This ensures executables install to the correct directory for ROS 2."}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"58-building-with-colcon",children:"5.8 Building with colcon"}),"\n",(0,a.jsx)(e.h3,{id:"the-colcon-build-system",children:"The colcon Build System"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"colcon"})," is ROS 2's build tool, supporting multiple build types (Python, CMake, others) in a unified workflow."]}),"\n",(0,a.jsx)(e.h3,{id:"building-a-package",children:"Building a Package"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Navigate to workspace root\r\ncd ~/ros2_ws\r\n\r\n# Build all packages\r\ncolcon build\r\n\r\n# Build specific package\r\ncolcon build --packages-select my_robot_control\r\n\r\n# Build with symlinks (for faster Python development)\r\ncolcon build --symlink-install\r\n\r\n# Build with parallel jobs\r\ncolcon build --parallel-workers 4\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Common Flags"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--packages-select PKG"}),": Build only ",(0,a.jsx)(e.code,{children:"PKG"})," (and dependencies)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--packages-up-to PKG"}),": Build ",(0,a.jsx)(e.code,{children:"PKG"})," and all its dependencies"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--symlink-install"}),": Create symlinks instead of copying files (Python only)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--parallel-workers N"}),": Use ",(0,a.jsx)(e.code,{children:"N"})," parallel build jobs"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--event-handlers console_direct+"}),": Show real-time build output"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"build-output",children:"Build Output"}),"\n",(0,a.jsx)(e.p,{children:"After building, your workspace has:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"ros2_ws/\r\n\u251c\u2500\u2500 src/              # Source code\r\n\u251c\u2500\u2500 build/            # Build artifacts (temporary)\r\n\u251c\u2500\u2500 install/          # Installed packages\r\n\u2514\u2500\u2500 log/              # Build logs\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"59-workspace-setup-and-sourcing",children:"5.9 Workspace Setup and Sourcing"}),"\n",(0,a.jsx)(e.h3,{id:"workspace-anatomy",children:"Workspace Anatomy"}),"\n",(0,a.jsxs)(e.p,{children:["ROS 2 uses ",(0,a.jsx)(e.strong,{children:"overlay"})," workspaces:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Underlay"}),": Base ROS 2 installation (",(0,a.jsx)(e.code,{children:"/opt/ros/humble"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Overlay"}),": Your custom workspace (",(0,a.jsx)(e.code,{children:"~/ros2_ws"}),")"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Overlays have higher precedence, allowing you to override base packages."}),"\n",(0,a.jsx)(e.h3,{id:"sourcing",children:"Sourcing"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Source the base ROS 2 installation"})," (do this in ",(0,a.jsx)(e.code,{children:"~/.bashrc"}),"):"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Source your workspace"})," after building:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws\r\nsource install/setup.bash\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsxs)(e.strong,{children:["Add to ",(0,a.jsx)(e.code,{children:"~/.bashrc"})," for persistence"]}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,a.jsx)(e.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,a.jsx)(e.p,{children:"Key ROS 2 environment variables:"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Variable"}),(0,a.jsx)(e.th,{children:"Purpose"}),(0,a.jsx)(e.th,{children:"Example"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"ROS_DOMAIN_ID"})}),(0,a.jsx)(e.td,{children:"Isolate multiple robots on same network"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"export ROS_DOMAIN_ID=42"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"ROS_LOCALHOST_ONLY"})}),(0,a.jsx)(e.td,{children:"Restrict to localhost"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"export ROS_LOCALHOST_ONLY=1"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"ROS_DISTRO"})}),(0,a.jsx)(e.td,{children:"ROS 2 distribution"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"humble"})})]})]})]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Set ROS_DOMAIN_ID"})," to avoid conflicts:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"export ROS_DOMAIN_ID=10  # Use 0-101 for different robot groups\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"510-dependency-management-with-rosdep",children:"5.10 Dependency Management with rosdep"}),"\n",(0,a.jsx)(e.h3,{id:"what-is-rosdep",children:"What is rosdep?"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"rosdep"})," resolves and installs system dependencies for ROS packages."]}),"\n",(0,a.jsx)(e.h3,{id:"installing-dependencies",children:"Installing Dependencies"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Initialize rosdep"})," (once per system):"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"sudo rosdep init\r\nrosdep update\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Install all dependencies for your workspace"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws\r\nrosdep install --from-paths src --ignore-src -r -y\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Flags"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--from-paths src"}),": Scan ",(0,a.jsx)(e.code,{children:"src"})," directory"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"--ignore-src"}),": Don't reinstall packages already in workspace"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"-r"}),": Continue on errors"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"-y"}),": Auto-confirm installations"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"declaring-dependencies",children:"Declaring Dependencies"}),"\n",(0,a.jsxs)(e.p,{children:["In ",(0,a.jsx)(e.code,{children:"package.xml"}),", use package names from the ",(0,a.jsx)(e.a,{href:"https://github.com/ros/rosdistro",children:"rosdep database"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:"<depend>rclpy</depend>                  \x3c!-- ROS package --\x3e\r\n<depend>python3-numpy</depend>          \x3c!-- System package --\x3e\r\n<depend>geometry_msgs</depend>          \x3c!-- ROS message package --\x3e\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"511-testing-your-package",children:"5.11 Testing Your Package"}),"\n",(0,a.jsx)(e.h3,{id:"unit-tests-with-pytest",children:"Unit Tests with pytest"}),"\n",(0,a.jsxs)(e.p,{children:["Create tests in the ",(0,a.jsx)(e.code,{children:"test/"})," directory:"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"File"}),": ",(0,a.jsx)(e.code,{children:"test/test_velocity_controller.py"})]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import pytest\r\nfrom my_robot_control.velocity_controller import VelocityController\r\n\r\ndef test_controller_initialization():\r\n    controller = VelocityController()\r\n    assert controller is not None\r\n    assert controller.max_velocity == 2.0\r\n\r\ndef test_velocity_limits():\r\n    controller = VelocityController()\r\n    clamped = controller.clamp_velocity(5.0)\r\n    assert clamped <= controller.max_velocity\n"})}),"\n",(0,a.jsx)(e.h3,{id:"running-tests",children:"Running Tests"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# From workspace root\r\ncolcon test --packages-select my_robot_control\r\n\r\n# View test results\r\ncolcon test-result --verbose\n"})}),"\n",(0,a.jsx)(e.h3,{id:"linting-and-code-quality",children:"Linting and Code Quality"}),"\n",(0,a.jsxs)(e.p,{children:["Add to ",(0,a.jsx)(e.code,{children:"package.xml"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:"<test_depend>ament_copyright</test_depend>\r\n<test_depend>ament_flake8</test_depend>\r\n<test_depend>ament_pep257</test_depend>\n"})}),"\n",(0,a.jsx)(e.p,{children:"Run linters:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ament_flake8 src/my_robot_control/\r\nament_pep257 src/my_robot_control/\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"512-complete-package-example",children:"5.12 Complete Package Example"}),"\n",(0,a.jsx)(e.p,{children:"Let's build a complete package with nodes, launch files, config, and tests."}),"\n",(0,a.jsx)(e.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"humanoid_arm_control/\r\n\u251c\u2500\u2500 package.xml\r\n\u251c\u2500\u2500 setup.py\r\n\u251c\u2500\u2500 setup.cfg\r\n\u251c\u2500\u2500 resource/\r\n\u2502   \u2514\u2500\u2500 humanoid_arm_control\r\n\u251c\u2500\u2500 humanoid_arm_control/\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 arm_controller.py\r\n\u2502   \u2514\u2500\u2500 kinematics.py\r\n\u251c\u2500\u2500 launch/\r\n\u2502   \u2514\u2500\u2500 arm_control.launch.py\r\n\u251c\u2500\u2500 config/\r\n\u2502   \u2514\u2500\u2500 arm_params.yaml\r\n\u251c\u2500\u2500 test/\r\n\u2502   \u2514\u2500\u2500 test_arm_controller.py\r\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,a.jsx)(e.h3,{id:"node-arm_controllerpy",children:"Node: arm_controller.py"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist\r\nfrom sensor_msgs.msg import JointState\r\n\r\nclass ArmController(Node):\r\n    def __init__(self):\r\n        super().__init__('arm_controller')\r\n        \r\n        # Declare parameters\r\n        self.declare_parameter('control_frequency', 50.0)\r\n        self.declare_parameter('max_velocity', 2.0)\r\n        self.declare_parameter('joint_names', ['shoulder', 'elbow', 'wrist'])\r\n        \r\n        # Get parameters\r\n        self.control_freq = self.get_parameter('control_frequency').value\r\n        self.max_vel = self.get_parameter('max_velocity').value\r\n        self.joint_names = self.get_parameter('joint_names').value\r\n        \r\n        # Publishers and subscribers\r\n        self.cmd_sub = self.create_subscription(\r\n            Twist, 'cmd_vel', self.cmd_callback, 10)\r\n        self.joint_pub = self.create_publisher(JointState, 'joint_states', 10)\r\n        \r\n        # Timer for control loop\r\n        self.timer = self.create_timer(1.0 / self.control_freq, self.control_loop)\r\n        \r\n        self.get_logger().info(f'Arm controller started at {self.control_freq} Hz')\r\n    \r\n    def cmd_callback(self, msg):\r\n        # TODO: Process velocity command\r\n        pass\r\n    \r\n    def control_loop(self):\r\n        # TODO: Publish joint states\r\n        joint_state = JointState()\r\n        joint_state.header.stamp = self.get_clock().now().to_msg()\r\n        joint_state.name = self.joint_names\r\n        # ... set positions, velocities, efforts\r\n        self.joint_pub.publish(joint_state)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    controller = ArmController()\r\n    rclpy.spin(controller)\r\n    controller.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,a.jsx)(e.h3,{id:"configuration-configarm_paramsyaml",children:"Configuration: config/arm_params.yaml"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"arm_controller:\r\n  ros__parameters:\r\n    control_frequency: 100.0\r\n    max_velocity: 3.0\r\n    joint_names:\r\n      - left_shoulder\r\n      - left_elbow\r\n      - left_wrist\n"})}),"\n",(0,a.jsx)(e.h3,{id:"launch-file-launcharm_controllaunchpy",children:"Launch File: launch/arm_control.launch.py"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Get package directory\r\n    pkg_dir = get_package_share_directory('humanoid_arm_control')\r\n    \r\n    # Declare arguments\r\n    use_sim_arg = DeclareLaunchArgument(\r\n        'use_sim',\r\n        default_value='false',\r\n        description='Use simulation time'\r\n    )\r\n    \r\n    config_file_arg = DeclareLaunchArgument(\r\n        'config_file',\r\n        default_value=os.path.join(pkg_dir, 'config', 'arm_params.yaml'),\r\n        description='Path to config file'\r\n    )\r\n    \r\n    # Nodes\r\n    arm_controller_node = Node(\r\n        package='humanoid_arm_control',\r\n        executable='arm_controller',\r\n        name='left_arm_controller',\r\n        parameters=[\r\n            LaunchConfiguration('config_file'),\r\n            {'use_sim_time': LaunchConfiguration('use_sim')}\r\n        ],\r\n        output='screen'\r\n    )\r\n    \r\n    return LaunchDescription([\r\n        use_sim_arg,\r\n        config_file_arg,\r\n        arm_controller_node\r\n    ])\n"})}),"\n",(0,a.jsx)(e.h3,{id:"setuppy",children:"setup.py"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from setuptools import setup\r\nimport os\r\nfrom glob import glob\r\n\r\npackage_name = 'humanoid_arm_control'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='1.0.0',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py')),\r\n        (os.path.join('share', package_name, 'config'), glob('config/*.yaml')),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='Your Name',\r\n    maintainer_email='yourname@example.com',\r\n    description='Arm controller for humanoid robot',\r\n    license='Apache-2.0',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'arm_controller = humanoid_arm_control.arm_controller:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,a.jsx)(e.h3,{id:"packagexml",children:"package.xml"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>humanoid_arm_control</name>\r\n  <version>1.0.0</version>\r\n  <description>Arm controller for humanoid robot</description>\r\n  <maintainer email="yourname@example.com">Your Name</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  <buildtool_depend>ament_python</buildtool_depend>\r\n\r\n  <depend>rclpy</depend>\r\n  <depend>geometry_msgs</depend>\r\n  <depend>sensor_msgs</depend>\r\n\r\n  <test_depend>ament_flake8</test_depend>\r\n  <test_depend>ament_pep257</test_depend>\r\n  <test_depend>python3-pytest</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"build-and-run",children:"Build and Run"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Build\r\ncd ~/ros2_ws\r\ncolcon build --packages-select humanoid_arm_control --symlink-install\r\n\r\n# Source\r\nsource install/setup.bash\r\n\r\n# Run\r\nros2 launch humanoid_arm_control arm_control.launch.py\r\n\r\n# Run with arguments\r\nros2 launch humanoid_arm_control arm_control.launch.py use_sim:=true\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"513-best-practices",children:"5.13 Best Practices"}),"\n",(0,a.jsx)(e.h3,{id:"documentation",children:"Documentation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"README.md"})," should include:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Package description and purpose"}),"\n",(0,a.jsx)(e.li,{children:"Installation instructions"}),"\n",(0,a.jsx)(e.li,{children:"Usage examples (how to run nodes/launch files)"}),"\n",(0,a.jsx)(e.li,{children:"Configuration options"}),"\n",(0,a.jsx)(e.li,{children:"Dependencies"}),"\n",(0,a.jsx)(e.li,{children:"Known issues and TODOs"}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Example README.md"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-markdown",children:"# Humanoid Arm Control\r\n\r\nControl package for humanoid robot arm with 3-DOF (shoulder, elbow, wrist).\r\n\r\n## Installation\r\n\r\n```bash\r\ncd ~/ros2_ws/src\r\ngit clone https://github.com/username/humanoid_arm_control.git\r\ncd ~/ros2_ws\r\nrosdep install --from-paths src --ignore-src -r -y\r\ncolcon build --packages-select humanoid_arm_control\n"})}),"\n",(0,a.jsx)(e.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(e.p,{children:"Launch arm controller:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 launch humanoid_arm_control arm_control.launch.py\n"})}),"\n",(0,a.jsx)(e.p,{children:"With simulation:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 launch humanoid_arm_control arm_control.launch.py use_sim:=true\n"})}),"\n",(0,a.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(e.p,{children:["Edit ",(0,a.jsx)(e.code,{children:"config/arm_params.yaml"})," to adjust:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"control_frequency"}),": Control loop rate (Hz)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"max_velocity"}),": Maximum joint velocity (rad/s)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"joint_names"}),": List of controlled joints"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"ROS 2 Humble"}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"rclpy"}),", ",(0,a.jsx)(e.code,{children:"geometry_msgs"}),", ",(0,a.jsx)(e.code,{children:"sensor_msgs"})]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\r\n### Versioning\r\n\r\nFollow **Semantic Versioning** (SemVer):\r\n- **MAJOR**: Incompatible API changes\r\n- **MINOR**: Add functionality (backwards-compatible)\r\n- **PATCH**: Bug fixes (backwards-compatible)\r\n\r\nExamples:\r\n- `1.0.0`: Initial release\r\n- `1.1.0`: Added new controller type\r\n- `1.1.1`: Fixed velocity clamping bug\r\n- `2.0.0`: Changed parameter names (breaking change)\r\n\r\n### Code Organization\r\n\r\n- **Modularity**: One node class per file\r\n- **Reusability**: Extract common code to utility modules\r\n- **Configuration**: Use parameters, avoid hardcoding\r\n- **Testing**: Unit test critical algorithms\r\n- **Linting**: Follow PEP 8 style guide\r\n\r\n### Package Naming\r\n\r\n- Use lowercase with underscores: `my_robot_control`\r\n- Be descriptive: `humanoid_manipulation` vs. `manipulator`\r\n- Avoid ROS 1 naming: Don't use `_ros` suffix (redundant in ROS 2)\r\n\r\n---\r\n\r\n## Chapter Summary\r\n\r\nIn this chapter, you learned:\r\n\r\n\u2705 **Launch files**: Automate multi-node system startup with Python launch syntax  \r\n\u2705 **Node configuration**: Pass parameters via dictionaries or YAML files  \r\n\u2705 **Remapping**: Change topic/service/action names at runtime  \r\n\u2705 **Launch arguments**: Create flexible, reusable launch files  \r\n\u2705 **Package structure**: Standard directory layout for ROS 2 packages  \r\n\u2705 **package.xml**: Declare dependencies and metadata  \r\n\u2705 **setup.py**: Configure entry points and data files  \r\n\u2705 **colcon build**: Build packages with parallel compilation  \r\n\u2705 **Workspace management**: Understand overlays and sourcing  \r\n\u2705 **rosdep**: Resolve and install system dependencies  \r\n\u2705 **Testing**: Write unit tests with pytest  \r\n\u2705 **Best practices**: Documentation, versioning, code organization\r\n\r\n### Key Takeaways\r\n\r\n1. **Launch files are essential** for managing complex robotic systems\r\n2. **Python launch syntax** provides full programming capabilities\r\n3. **Parameters and arguments** enable flexible configuration without code changes\r\n4. **Standard package structure** improves collaboration and maintainability\r\n5. **colcon and rosdep** streamline build and dependency management\r\n6. **Documentation and testing** are critical for professional development\r\n\r\n### Next Steps\r\n\r\n- **Module 2 (Gazebo Simulation)**: Use launch files to start simulation worlds and spawn robots\r\n- **Module 3 (AI-Robot Brain)**: Organize complex perception and planning systems into packages\r\n- **Capstone project**: Structure your humanoid robot system with proper packages and launch files\r\n\r\n### Additional Resources\r\n\r\n- [ROS 2 Launch Documentation](https://docs.ros.org/en/humble/Tutorials/Intermediate/Launch/Launch-Main.html)\r\n- [colcon Documentation](https://colcon.readthedocs.io/)\r\n- [ament_python Build Type](https://docs.ros.org/en/humble/How-To-Guides/Ament-CMake-Python-Documentation.html)\r\n- [rosdep Database](https://github.com/ros/rosdistro)\r\n- [ROS 2 Package Template](https://github.com/ros2/ros2_tracing)\r\n\r\n---\r\n\r\n## Module 1 Completion\r\n\r\n\ud83c\udf89 **Congratulations!** You've completed Module 1: The Robotic Nervous System (ROS 2).\r\n\r\nYou now have a solid foundation in:\r\n- ROS 2 architecture and core concepts\r\n- Building nodes with Python (`rclpy`)\r\n- Integrating AI agents with ROS controllers\r\n- Modeling robots with URDF and xacro\r\n- Managing systems with launch files and packages\r\n\r\n**You're ready for:**\r\n- **Module 2**: Gazebo simulation and digital twins\r\n- **Module 3**: NVIDIA Isaac and perception pipelines\r\n- **Module 4**: Vision-Language-Action models\r\n- Building your own humanoid robot applications!\r\n\r\n---\r\n\r\n**Continue to Module 2: Digital Twin (Gazebo Simulation) \u2192**\n"})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>l});var s=r(6540);const a={},i=s.createContext(a);function o(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:o(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);