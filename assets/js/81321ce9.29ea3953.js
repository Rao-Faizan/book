"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5583],{3895:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"module4/chapter20","title":"Chapter 20: Deployment and Real-World Testing","description":"Deploy your VLA to the edge. Optimize for NVIDIA Jetson with TensorRT, containerize with Docker, and validate Sim-to-Real performance.","source":"@site/docs/module4/chapter20.mdx","sourceDirName":"module4","slug":"/module4/chapter20","permalink":"/book/docs/module4/chapter20","draft":false,"unlisted":false,"editUrl":"https://github.com/Rao-Faizan/book/tree/master/docs/module4/chapter20.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Chapter 20: Deployment and Real-World Testing","description":"Deploy your VLA to the edge. Optimize for NVIDIA Jetson with TensorRT, containerize with Docker, and validate Sim-to-Real performance.","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 19: Capstone Project - Autonomous Humanoid","permalink":"/book/docs/module4/chapter19"}}');var i=t(4848),o=t(8453);const s={title:"Chapter 20: Deployment and Real-World Testing",description:"Deploy your VLA to the edge. Optimize for NVIDIA Jetson with TensorRT, containerize with Docker, and validate Sim-to-Real performance.",sidebar_position:5},l="Chapter 20: Deployment and Real-World Testing",a={},d=[{value:"The Final Frontier: Reality",id:"the-final-frontier-reality",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"1. Edge Optimization with TensorRT",id:"1-edge-optimization-with-tensorrt",level:2},{value:"Why TensorRT?",id:"why-tensorrt",level:3},{value:"Converting YOLO to TensorRT",id:"converting-yolo-to-tensorrt",level:3},{value:"Inference in Python",id:"inference-in-python",level:3},{value:"2. Containerization with Docker",id:"2-containerization-with-docker",level:2},{value:"The Dockerfile",id:"the-dockerfile",level:3},{value:"Running on Jetson",id:"running-on-jetson",level:3},{value:"3. The Sim-to-Real Gap",id:"3-the-sim-to-real-gap",level:2},{value:"Common Causes &amp; Fixes",id:"common-causes--fixes",level:3},{value:"4. Safety Protocols",id:"4-safety-protocols",level:2},{value:"The Software &quot;Deadman Switch&quot;",id:"the-software-deadman-switch",level:3},{value:"5. Course Conclusion",id:"5-course-conclusion",level:2},{value:"You made it. \ud83c\udf93",id:"you-made-it-",level:3},{value:"Where to go from here?",id:"where-to-go-from-here",level:3},{value:"<em>End of Book.</em>",id:"end-of-book",level:2}];function h(e){const n={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-20-deployment-and-real-world-testing",children:"Chapter 20: Deployment and Real-World Testing"})}),"\n",(0,i.jsx)(n.h2,{id:"the-final-frontier-reality",children:"The Final Frontier: Reality"}),"\n",(0,i.jsxs)(n.p,{children:['Simulation is a safe haven. The real world is messy, chaotic, and dangerous.\r\nIn this final chapter, we take the "brain" you built in Chapter 19 and transplant it into a physical body (like the ',(0,i.jsx)(n.strong,{children:"Unitree Go2"})," or a custom ",(0,i.jsx)(n.strong,{children:"Jetson Orin"})," robot)."]}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"optimize"})," deep learning models using TensorRT for real-time edge inference"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Containerize"})," your entire ROS 2 stack using Docker for portability"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Deploy"})," the VLA pipeline to an NVIDIA Jetson Orin Nano/AGX"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Mitigate"}),' the "Sim-to-Real Gap" using domain randomization and calibration']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Implement"})," Safety Monitors to prevent physical damage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Present"})," your final Capstone Project with confidence"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Prerequisites"}),": Chapter 19, NVIDIA Jetson Device (Optional but recommended)",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 120 minutes"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-edge-optimization-with-tensorrt",children:"1. Edge Optimization with TensorRT"}),"\n",(0,i.jsxs)(n.p,{children:["Running GPT-4, Whisper, and YOLO on a laptop is easy. Running them on an embedded Jetson requires ",(0,i.jsx)(n.strong,{children:"Optimization"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"why-tensorrt",children:"Why TensorRT?"}),"\n",(0,i.jsxs)(n.p,{children:["NVIDIA TensorRT fuses layers and quantizes weights (FP32 $\\to$ INT8), delivering ",(0,i.jsx)(n.strong,{children:"4x-10x speedups"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"converting-yolo-to-tensorrt",children:"Converting YOLO to TensorRT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. Export PyTorch to ONNX\r\nyolo export model=yolov8n.pt format=onnx opset=11\r\n\r\n# 2. Compile ONNX to TensorRT Engine (on Jetson)\r\n/usr/src/tensorrt/bin/trtexec \\\r\n  --onnx=yolov8n.onnx \\\r\n  --saveEngine=yolov8n.engine \\\r\n  --fp16  # Use Half Precision\n"})}),"\n",(0,i.jsx)(n.h3,{id:"inference-in-python",children:"Inference in Python"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import tensorrt as trt\r\n# Load engine and allocate buffers...\r\n# (See Isaac ROS Use Case)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Isaac ROS"})," handles this automatically if you provide the ",(0,i.jsx)(n.code,{children:".engine"})," file."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-containerization-with-docker",children:"2. Containerization with Docker"}),"\n",(0,i.jsxs)(n.p,{children:['"It works on my machine" is not acceptable in robotics. We use ',(0,i.jsx)(n.strong,{children:"Docker"})," to ensure the robot runs exactly the same OS and libraries as development."]}),"\n",(0,i.jsx)(n.h3,{id:"the-dockerfile",children:"The Dockerfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:"FROM nvcr.io/nvidia/isaac/ros:humble-nav2-filesystem\r\n\r\n# Install dependencies\r\nRUN apt-get update && apt-get install -y \\\r\n    python3-pip \\\r\n    ros-humble-rmw-cyclonedds-cpp\r\n\r\n# Install Python requirements\r\nCOPY requirements.txt .\r\nRUN pip3 install -r requirements.txt\r\n\r\n# Copy Source Code\r\nWORKDIR /ros2_ws\r\nCOPY src src\r\n\r\n# Build\r\nRUN . /opt/ros/humble/setup.sh && colcon build\n"})}),"\n",(0,i.jsx)(n.h3,{id:"running-on-jetson",children:"Running on Jetson"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --net=host --runtime=nvidia --privileged \\\r\n  -v /dev:/dev \\\r\n  my-robot-image:latest \\\r\n  ros2 launch capstone bringup.launch.py\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-the-sim-to-real-gap",children:"3. The Sim-to-Real Gap"}),"\n",(0,i.jsxs)(n.p,{children:["When you run your code on the real robot, it ",(0,i.jsx)(n.em,{children:"will"})," fail. This is the ",(0,i.jsx)(n.strong,{children:"Reality Gap"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"common-causes--fixes",children:"Common Causes & Fixes"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Symptom"}),(0,i.jsx)(n.th,{children:"Cause"}),(0,i.jsx)(n.th,{children:"Fix"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Robot ignores trash"})}),(0,i.jsx)(n.td,{children:"Lighting is different"}),(0,i.jsxs)(n.td,{children:["Add ",(0,i.jsx)(n.strong,{children:"Domain Randomization"})," (Ch 15) to training data."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Robot crashes"})}),(0,i.jsx)(n.td,{children:"Odometry drift"}),(0,i.jsxs)(n.td,{children:["Calibrate ",(0,i.jsx)(n.strong,{children:"IMU"})," and Wheel Encoders. Use V-SLAM."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Grasp fails"})}),(0,i.jsx)(n.td,{children:"Object friction"}),(0,i.jsxs)(n.td,{children:["Add ",(0,i.jsx)(n.strong,{children:"compliant foam"})," to gripper fingers."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Latency"})}),(0,i.jsx)(n.td,{children:"WiFi + weak CPU"}),(0,i.jsxs)(n.td,{children:["Move inference to ",(0,i.jsx)(n.strong,{children:"Jetson GPU"}),". Use Wired Ethernet."]})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-safety-protocols",children:"4. Safety Protocols"}),"\n",(0,i.jsx)(n.p,{children:"A 15kg robot moving at 1.0 m/s can break a leg (yours or its own)."}),"\n",(0,i.jsx)(n.h3,{id:"the-software-deadman-switch",children:'The Software "Deadman Switch"'}),"\n",(0,i.jsx)(n.p,{children:"Implement a heartbeat monitor. If the joystick/Wi-Fi disconnects, the robot must stop immediately."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class SafetyMonitor(Node):\r\n    def __init__(self):\r\n        self.last_heartbeat = time.time()\r\n        self.create_timer(0.1, self.check_safety)\r\n        self.pub_stop = self.create_publisher(Twist, '/cmd_vel', 10)\r\n\r\n    def heartbeat_cb(self, msg):\r\n        self.last_heartbeat = time.time()\r\n\r\n    def check_safety(self):\r\n        if (time.time() - self.last_heartbeat) > 0.5:\r\n            # EMERGENCY STOP\r\n            self.pub_stop.publish(Twist()) # Zero velocity\r\n            self.get_logger().fatal(\"EMERGENCY STOP: Heartbeat Lost\")\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-course-conclusion",children:"5. Course Conclusion"}),"\n",(0,i.jsx)(n.h3,{id:"you-made-it-",children:"You made it. \ud83c\udf93"}),"\n",(0,i.jsx)(n.p,{children:"You started with a definition of a node (Module 1).\r\nYou built a digital twin physics simulation (Module 2).\r\nYou mastered the NVIDIA Isaac ecosystem (Module 3).\r\nAnd finally, you gave your robot a voice, eyes, and a brain (Module 4)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What you have built is the foundation of the future."}),"\r\nPhysical AI - embodied intelligence - is just beginning."]}),"\n",(0,i.jsx)(n.h3,{id:"where-to-go-from-here",children:"Where to go from here?"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Portfolio"}),": Record your Capstone video. Post it on LinkedIn/YouTube."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Community"}),": Join the ROS Discourse and NVIDIA Developer Forums."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hardware"}),": Try running this on a humanoid like the ",(0,i.jsx)(n.strong,{children:"Unitree H1"})," or ",(0,i.jsx)(n.strong,{children:"Tesla Optimus"})," (sim)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Thank you for taking this journey with us."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"end-of-book",children:(0,i.jsx)(n.em,{children:"End of Book."})}),"\n",(0,i.jsx)(n.admonition,{title:"Chapter Completion",type:"note",children:(0,i.jsxs)(n.p,{children:["\u2705 You've completed Chapter 20: Deployment and Real-World Testing",(0,i.jsx)(n.br,{}),"\n","\u23f1\ufe0f Estimated time to complete: 120 minutes",(0,i.jsx)(n.br,{}),"\n","\ud83d\udcca Progress: Module 4 - Chapter 5 of 5"]})})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);